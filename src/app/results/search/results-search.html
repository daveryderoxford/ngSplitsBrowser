<div class="docs-search-input-container">
  <mat-label>Search</mat-label>
  <input type="text" class="docs-search-input"
    (focus)="toggleIsExpanded()"
    [matAutocomplete]="autoCompletePanel" [formControl]="searchControl">
  <mat-icon class="docs-search-icon">search</mat-icon>
</div>

<mat-autocomplete #autoCompletePanel="matAutocomplete" [displayWith]="displayFn" (optionSelected)="onOptionSelected($event)">
  @for (group of filterPanelContents; track group) {
    <mat-optgroup [label]="group.name">
      @for (option of group.options; track option) {
        <mat-option [value]="option">
          @if (isCompetitor(option) ) {
              @let c = asCompetitor(option);
              {{c.name}} {{c.club}} {{c.courseClass?.name }}
          } @else {
          {{ option.name  }}
          }
        </mat-option>
      }
    </mat-optgroup>
  }
</mat-autocomplete>