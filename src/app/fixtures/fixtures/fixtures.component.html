<!-- Large Screen -->
<div *ngIf="!isHandSet" class="large-screen">

  <ng-container *ngIf="fixtures$ | async as fixtures">

    <app-sidenav-button class="top-left"> </app-sidenav-button>

    <app-fixtures-options class="top-right mat-elevation-z2" [postcode]="postcode$ | async"
      (postcodeChanged)="postcodeChanged($event)" [filter]="fs.getFilter() | async"
      (filterChanged)="filterChanged($event)">
    </app-fixtures-options>

    <as-split direction="vertical">

      <as-split-area>
        <app-fixtures-map [fixtures]="fixtures" [homeLocation]="homeLocation$ | async"
          [selectedFixture]="selectedFixture" (fixtureSelected)="onFeatureSelected($event)">
        </app-fixtures-map>
      </as-split-area>

      <as-split-area>
        <app-fixtures-grid [fixtures]="fixtures" [homeLocation]="homeLocation$ | async"
          [selectedFixture]="selectedFixture" (fixtureSelected)="onFeatureSelected($event)">
        </app-fixtures-grid>
      </as-split-area>

    </as-split>

  </ng-container>
</div>

<!-- Handset -->
<div *ngIf="isHandSet" fxLayout="column" class=handset>

  <div class="mat-elevation-z2 handset-filter-options">
    <app-sidenav-button> </app-sidenav-button>
    <span fxFlex></span>
    <button mat-button (click)="mapview=false">
      <mat-icon>list</mat-icon>
    </button>
    <button mat-button (click)="mapview=true">
      <mat-icon>map</mat-icon>
    </button>
    <button mat-button (click)="hideMobleFilter = !hideMobleFilter">
      FILTER
      <mat-icon *ngIf="hideMobleFilter">arrow_drop_down</mat-icon>
      <mat-icon *ngIf="!hideMobleFilter">arrow_drop_up</mat-icon>
    </button>
  </div>

  <app-fixtures-options [hidden]="hideMobleFilter" class="mat-elevation-z2 handset-filter-options "
    [postcode]="postcode$ | async" (postcodeChanged)="postcodeChanged($event)" [filter]="fs.getFilter() | async"
    (filterChanged)="filterChanged($event)">
  </app-fixtures-options>

  <cdk-virtual-scroll-viewport fxFlex itemSize="120" *ngIf="!mapview">
    <mat-list>

      <mat-list-item (click)="menubutton.openMenu()" *cdkVirtualFor="let fixture of fixtures$ | async">

        <div mat-line layout-align="space-evenly">
          <span fxFlex=50>{{fixture.date | fixturedate }}</span>
          <span fxFlex=30> {{fixture.club}}</span>
          <span fxFlex *ngIf="fixture.distance !== -1;">
            {{fixture.distance}}miles
          </span>
        </div>
        <p mat-line>
          {{fixture.name | ellipsis:39}}
        </p>
        <p mat-line>
          {{fixture.area | ellipsis: 30}}
          <span fxFlex></span>
          <mat-icon inline=true>check_circle</mat-icon>
        </p>

        <app-fixture-actions #menubutton mobile="true" [fixture]="fixture"></app-fixture-actions>

        <mat-divider></mat-divider>
      </mat-list-item>

    </mat-list>
  </cdk-virtual-scroll-viewport>

  <app-fixtures-map fxFlex *ngIf="mapview" [fixtures]="fixtures$ | async" [homeLocation]="homeLocation$ | async"
    [selectedFixture]="selectedFixture" (fixtureSelected)="onFeatureSelected($event)">
  </app-fixtures-map>

</div>