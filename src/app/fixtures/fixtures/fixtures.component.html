<!-- Large Screen -->
<div *ngIf="!isHandSet" class="large-screen">

  <app-navbar class="top-left" layout="menu"></app-navbar>

  <app-fixtures-options class="top-right mat-elevation-z2" [postcode]="postcode$ | async"
    (postcodeChanged)="postcodeChanged($event)" [filter]="fs.getFilter() | async"
    (filterChanged)="filterChanged($event)">
  </app-fixtures-options>

  <as-split direction="vertical">

    <as-split-area>
      <app-fixtures-map [fixtures]="filteredFixtures$ | async" [homeLocation]="homeLocation$ | async" [selectedFixture]="selectedFixture"
        (fixtureSelected)="onFeatureSelected($event)">
      </app-fixtures-map>
    </as-split-area>

    <as-split-area>
      <app-fixtures-grid [fixtures]="filteredFixtures$ | async" [homeLocation]="homeLocation$ | async"
        [selectedFixture]="selectedFixture" (fixtureSelected)="onFeatureSelected($event)">
      </app-fixtures-grid>
    </as-split-area>

  </as-split>
</div>

<!-- Handset -->
<div *ngIf="isHandSet" fxLayout="column" class=handset>

  <div fxFlex class="mat-elevation-z2 handset-filter-options">
    <app-navbar layout="menu"></app-navbar>
    <button mat-button style="float: right;" (click)="hideMobleFilter = !hideMobleFilter">
       FILTER
       <mat-icon *ngIf="hideMobleFilter">arrow_drop_down</mat-icon>
       <mat-icon *ngIf="!hideMobleFilter">arrow_drop_up</mat-icon>

    </button>
  </div>

  <app-fixtures-options fxFlex [hidden]="hideMobleFilter" class="mat-elevation-z2 handset-filter-options "
    [postcode]="postcode$ | async" (postcodeChanged)="postcodeChanged($event)" [filter]="fs.getFilter() | async"
    (filterChanged)="filterChanged($event)">
  </app-fixtures-options>

  <cdk-virtual-scroll-viewport fxFill itemSize="120">
    <mat-list>

      <mat-list-item (click)="displayMobileActions(fixture)" *cdkVirtualFor="let fixture of filteredFixtures$ | async">
        <h3 matLine layout-align="space-between">

          <span fxFlex>{{fixture.date | fixturedate }}</span>

          <span fxFlex *ngIf="fixture.distance !== -1;">
            {{fixture.distance}}miles
          </span>

          <a fxFlex="nogrow" href={{fixture.clubURL}} target="_blank"> {{fixture.club}} </a>
        </h3>

        <p matLine class="no-wrap"> {{fixture.name | ellipsis:39 }} </p>

        <p matLine layout-align="space-between">
          <a fxFlex *ngIf="fixture.latLong;" href="{{fixture | googleURL}}" target="_blank">{{fixture.postcode}}</a>
          <span fxFlex *ngIf="!fixture.latLong;">{{fixture.postcode }}</span>

          <a fxFlex="nogrow" *ngIf="fixture.latLong;" href="{{fixture | bingURL}}"
            target="_blank">{{fixture.area | ellipsis: 30}}</a>
          <span fxFlex="nogrow" *ngIf="!fixture.latLong;">{{fixture.area | ellipsis: 30}}</span>
        </p>

        <mat-divider></mat-divider>
      </mat-list-item>

    </mat-list>
  </cdk-virtual-scroll-viewport>

  <mat-menu #menu="matMenu" hasBackdrop=true>
    <ng-template matMenuContent let-fixture="fixture">
      <a mat-menu-item href="{{fixture.clubURL}}"> Club website</a>
      <a mat-menu-item *ngIf="fixture.latLong;" href="{{fixture | bingURL}}" target="_blank">OS Map</a>
      <a mat-menu-item *ngIf="fixture.latLong;" href="{{fixture | googleURL}}" target="_blank">Google map</a>
      <a mat-menu-item *ngIf="fixture.latLong;" href="{{fixture | googleDirectionsURL}}" target="_blank"> Directions</a>
    </ng-template>
  </mat-menu>

</div>